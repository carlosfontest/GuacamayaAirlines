extends layout

block content
   .airport
      .airport__background
         img.airport__background-image(src=`/images/${airport.iata}.jpg`, alt=`Airport - ${airport.iata}`)
         .airport__background-conttext
            p.airport__background-text 
               span #{airport.iata} 
               | - #{airport.city}
      .airport__info
         .airport__map
            img.airport__map-image(src=h.staticMap(airport.lon, airport.lat))
            .airport__map-contname
               p.airport__map-name - #{airport.name} -

         .airport__flights
            each flight, index in airport.flights
               .airport__flights-card
                  table
                     thead 
                        tr
                           th From
                           th To
                           th Depart Date
                           th Price
                           th 
                     tbody
                        tr
                           - const conditionFrom = flight.origin.startsWith(airport.iata);
                           - const conditionTo = flight.destiny.startsWith(`${airport.iata}`);
                           if conditionFrom
                              td <span class="flightImportant">#{flight.origin}</span>
                           else
                              td #{flight.origin}
                           if conditionTo
                              td <span class="flightImportant">#{flight.destiny}</span>
                           else
                              td #{flight.destiny}
                           td= h.moment(flight.date).add(4, 'hours').format('MMMM Do YYYY')
                           td #{flight.basePrice} $
                           td.buttonCell 
                              a(class="waves-effect waves-light btn-small modal-trigger" href=`#purchaseModal${index}`) Purchase&nbsp;&nbsp; <i class="fas fa-cart-plus"></i>
               //- PurchaseModal
               div(class="modal" id=`purchaseModal${index}`)
                  .modal-content
                     h4 Purchase Flight (#{flight.origin} - #{flight.destiny})
                     hr
                     .row.firstRow
                        .input-field.col.s4
                           input(type="text" id="identityCardPur" class="autocomplete" name="identityCard")
                           label#fre(for="identityCard") Identity Card
                        .input-field.col.s4
                           input#firstNamePur.validate(type='text' name="firstName")
                           label#fre(for='firstName') First Name
                        .input-field.col.s4
                           input#lastNamePur.validate(type='text' name="lastName")
                           label#fre(for='lastName') Last Name
                     .row  
                        .input-field.col.s4
                           input#agePur.validate(type='number' name="age")
                           label#fre(for='age') Age
                        .input-field.col.s4
                           select(required name="nationality" id="nationalityPur").select-home.browser-default
                              option(value='' disabled hidden selected) Nationality
                              option(value='United States') United States
                              option(value='Portugal') Portugal
                              option(value='Spain') Spain
                              option(value='England') England
                              option(value='France') France
                              option(value='Venezuela') Venezuela
                              option(value='Singapur') Singapur
                        .input-field.col.s4
                           select(required name="gender" id="genderPur").select-home.browser-default
                              option(value='' disabled hidden selected) Gender
                              option(value='male') Male
                              option(value='female') Female
                     .row  
                        .input-field.col.s6
                           input#emailPur.validate(type='email' name="email")
                           label#fre(for='email') Email
                  .modal-footer
                     a.waves-effect.waves-green.btn-flat#cleanButton Clean â†º
                     a.modal-close.waves-effect.waves-green.btn-flat(href='#!') Next ðŸ ž

            if airport.flights.length == 0
               p.notFoundText Not found flights like this
   
